<%- include('../layouts/header') %>
<%- include('./nav', {admin: admin}) %>
<main>
    <h2>Edit Page</h2>
    <form action="/admin/edit/<%= page.slug %>" method="POST" enctype="multipart/form-data">
        <div>
            <label for="title">Title:</label>
            <input type="text" id="pageTitle" name="pageTitle" value="<%= page.pageTitle %>">
        </div>
        <div>
            <label for="slug">Slug:</label>
            <input type="text" id="slug" name="slug" value="<%= page.slug %>">
        </div>
        <div>
            <label for="image">Image:</label>
            <input type="file" id="pageImageName" name="pageImageName">
            <img src="/uploads/<%= page.pageImageName %>" alt="<%= page.pageImageName %>" >
            <input type="hidden" name="previousImage" value="<%= page.pageImageName %>">
        </div>
        <div>
            <label for="content">Content:</label>
            <input class="input-page_content" name="pageContent" type="text" id="pageContent" value="<%= page.pageContent %>">
        </div>
        <% if (typeof(errors) !== 'undefined') { %>
            <ul>
                <% errors.forEach(error=> { %>
                    <li class="error">
                        <%= error.msg %>
                    </li>
                    <% }) %>
            </ul>
            <% } %>
                <button type="submit">Save Changes</button>
    </form>
</main>

<%- include('../layouts/footer') %>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script src="/js/tinymce/jquery.tinymce.min.js"></script>
<script src="/js/tinymce/tinymce.min.js"></script>

<script>
    tinymce.init({
        selector: '#pageContent',
        height: 300,
        menubar: false
    });
</script>